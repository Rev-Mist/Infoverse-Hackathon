<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeLink - Digital Safety Learning Hub</title>
    <style>
        /* Design System */
        :root {
            --bg-primary: #0A1929;
            --bg-secondary: #112240;
            --bg-card: #1A2F45;
            --cyan: #00D9FF;
            --purple: #FF00D9;
            --green: #00FF88;
            --orange: #FF6B00;
            --text-primary: #FFFFFF;
            --text-secondary: #A8B2D1;
            --text-dim: #6B7A99;
            --red: #FF4444;
            --yellow: #FFD700;
            --border: rgba(0, 217, 255, 0.2);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --shadow-glow: 0 0 20px rgba(0, 217, 255, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Neural Network Background Animation */
        .neural-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }

        /*.neural-dot {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--cyan);
            border-radius: 50%;
            opacity: 0.3;
            animation: pulse 3s ease-in-out infinite;
        }*/

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--cyan), 0 0 20px var(--cyan); }
            50% { box-shadow: 0 0 20px var(--cyan), 0 0 40px var(--cyan); }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            background: rgba(17, 34, 64, 0.8);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            cursor: pointer;
            transition: color 0.3s;
            font-size: 14px;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--cyan);
        }

        .security-score-badge {
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        /* Page Sections */
        .page-section {
            display: none;
            animation: slideInUp 0.5s ease-out;
        }

        .page-section.active {
            display: block;
        }

        /* Landing Page */
        .hero {
            text-align: center;
            padding: 80px 20px;
            position: relative;
        }

        .hero h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            color: var(--text-primary);
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow-glow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.5);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--cyan);
            padding: 12px 30px;
            border: 1px solid var(--cyan);
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: rgba(0, 217, 255, 0.1);
        }

        /* Threats Grid */
        .threats-section {
            padding: 60px 20px;
        }

        .section-title {
            text-align: center;
            font-size: 32px;
            margin-bottom: 40px;
            color: var(--cyan);
        }

        .threats-grid, .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .threat-card, .module-card {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--border);
            transition: all 0.3s;
            cursor: pointer;
        }

        .threat-card:hover, .module-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-glow);
            border-color: var(--cyan);
        }

        .threat-icon, .module-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .threat-name, .module-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .threat-desc {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .module-topics {
            color: var(--text-dim);
            font-size: 14px;
            margin-top: 10px;
        }

        /* Dashboard */
        .dashboard {
            padding: 40px 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .dashboard-card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score-display {
            font-size: 48px;
            font-weight: 700;
            color: var(--cyan);
            text-align: center;
            margin: 20px 0;
        }

        .score-breakdown {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            text-align: center;
        }

        .stat-box {
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 10px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--cyan);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-dim);
            margin-top: 5px;
        }

        .challenge-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .challenge-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .challenge-meta {
            display: flex;
            gap: 10px;
            font-size: 12px;
            color: var(--text-dim);
        }

        .difficulty-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .difficulty-easy { background: rgba(0, 255, 136, 0.2); color: var(--green); }
        .difficulty-medium { background: rgba(255, 215, 0, 0.2); color: var(--yellow); }
        .difficulty-hard { background: rgba(255, 68, 68, 0.2); color: var(--red); }

        .points-badge {
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 14px;
        }

        /* Learning Module View */
        .module-header {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }

        .module-title {
            font-size: 32px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--bg-secondary);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--cyan), var(--purple));
            transition: width 0.5s ease;
        }

        .story-card {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(255, 0, 217, 0.1));
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-top: 15px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .lesson-card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .lesson-card:hover {
            transform: translateY(-3px);
            border-color: var(--cyan);
        }

        .lesson-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .lesson-meta {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--text-dim);
            margin-bottom: 15px;
        }

        .lesson-status {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--green);
            font-size: 13px;
            margin-bottom: 15px;
        }

        /* Quiz Section */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .quiz-progress {
            font-size: 14px;
            color: var(--text-dim);
            margin-bottom: 10px;
        }

        .quiz-score {
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
        }

        .question-card {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 25px;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: var(--bg-secondary);
            padding: 15px 20px;
            border: 2px solid var(--border);
            border-radius: 10px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-primary);
            font-size: 16px;
        }

        .option-btn:hover {
            border-color: var(--cyan);
            background: rgba(0, 217, 255, 0.1);
        }

        .option-btn.selected {
            border-color: var(--cyan);
            background: rgba(0, 217, 255, 0.2);
        }

        .option-btn.correct {
            border-color: var(--green);
            background: rgba(0, 255, 136, 0.2);
        }

        .option-btn.incorrect {
            border-color: var(--red);
            background: rgba(255, 68, 68, 0.2);
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .feedback-box {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid var(--cyan);
        }

        .feedback-box.correct {
            border-left-color: var(--green);
        }

        .feedback-box.incorrect {
            border-left-color: var(--red);
        }

        /* Phishing Quiz */
        .email-container {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 25px;
        }

        .email-header {
            background: var(--bg-secondary);
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .email-field {
            margin-bottom: 10px;
            font-size: 14px;
        }

        .email-field strong {
            color: var(--cyan);
            margin-right: 10px;
        }

        .email-body {
            padding: 25px;
            line-height: 1.8;
        }

        .red-flags-section {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .red-flags-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--orange);
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .answer-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .answer-btn {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .answer-btn:hover {
            border-color: var(--cyan);
            background: rgba(0, 217, 255, 0.1);
        }

        .answer-btn.selected {
            border-color: var(--cyan);
            background: rgba(0, 217, 255, 0.2);
        }

        /* Password Strength Checker */
        .password-checker {
            max-width: 700px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .password-input-group {
            margin-bottom: 30px;
        }

        .password-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            margin-bottom: 15px;
        }

        .password-input:focus {
            outline: none;
            border-color: var(--cyan);
        }

        .strength-meter {
            height: 12px;
            background: var(--bg-secondary);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .strength-fill {
            height: 100%;
            transition: all 0.3s;
            border-radius: 10px;
        }

        .strength-weak { background: var(--red); width: 33%; }
        .strength-medium { background: var(--yellow); width: 66%; }
        .strength-strong { background: var(--green); width: 100%; }

        .strength-label {
            font-size: 14px;
            font-weight: 600;
        }

        .strength-feedback {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border);
            margin-top: 20px;
        }

        .feedback-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .tips-sidebar {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-top: 30px;
        }

        .tips-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--cyan);
        }

        .tip-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .tip-item:last-child {
            border-bottom: none;
        }

        /* Achievements Page */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 40px 20px;
        }

        .achievement-card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid var(--border);
            text-align: center;
            transition: all 0.3s;
        }

        .achievement-card.unlocked {
            border-color: var(--cyan);
        }

        .achievement-card.locked {
            opacity: 0.4;
            filter: grayscale(1);
        }

        .achievement-icon {
            font-size: 64px;
            margin-bottom: 15px;
        }

        .achievement-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .achievement-desc {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .achievement-points {
            color: var(--cyan);
            font-weight: 600;
        }

        .achievement-progress {
            margin-top: 15px;
            font-size: 12px;
            color: var(--text-dim);
        }

        /* Leaderboard */
        .leaderboard-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .leaderboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .tab-btn {
            padding: 12px 30px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 25px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            color: var(--text-primary);
            border-color: transparent;
        }

        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .leaderboard-item {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s;
        }

        .leaderboard-item:hover {
            border-color: var(--cyan);
        }

        .leaderboard-item.current-user {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(255, 0, 217, 0.1));
            border-color: var(--cyan);
        }

        .rank-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
            min-width: 40px;
        }

        .rank-number.top3 {
            font-size: 32px;
        }

        .user-info {
            flex: 1;
        }

        .username {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .user-stats {
            font-size: 13px;
            color: var(--text-dim);
        }

        .user-score {
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            top: 100px;
            right: 30px;
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            padding: 20px 25px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            z-index: 1000;
            animation: slideInRight 0.5s ease-out;
            display: none;
        }

        .toast.show {
            display: block;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .toast-icon {
            font-size: 32px;
        }

        .toast-text h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .toast-text p {
            font-size: 13px;
            opacity: 0.9;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 32px;
            }

            .hero p {
                font-size: 16px;
            }

            .section-title {
                font-size: 24px;
            }

            .nav {
                gap: 15px;
            }

            .nav-link {
                font-size: 12px;
            }

            .dashboard-grid, .threats-grid, .modules-grid {
                grid-template-columns: 1fr;
            }

            .answer-buttons {
                flex-direction: column;
            }

            .toast {
                right: 10px;
                left: 10px;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mb-30 {
            margin-bottom: 30px;
        }

        .mt-30 {
            margin-top: 30px;
        }

        /* Modal: Breach Theory */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 200;
            padding: 20px;
        }

        .modal-backdrop.show-modal {
            display: flex;
        }

        .modal-card {
            background: linear-gradient(180deg, rgba(26,47,69,0.95), rgba(10,25,41,0.95));
            border: 1px solid var(--border);
            padding: 24px;
            border-radius: 12px;
            max-width: 720px;
            width: 100%;
            box-shadow: var(--shadow);
        }

        .modal-card h2 {
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--cyan), var(--orange));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 20px;
        }

        .modal-card p { color: var(--text-secondary); line-height: 1.5; }





        
        /* Design System */
        :root {
            --bg-primary: #1b1b1d;
            --bg-secondary: #2b2d32;
            --bg-card: #2a2c2f;
            --cyan: #ffffff;
            --purple: #FF00D9;
            --green: #00FF88;
            --orange: #FF6B00;
            --text-primary: #bca8a8;
            --text-secondary: #A8B2D1;
            --text-dim: #6B7A99;
            --red: #FF4444;
            --yellow: #FFD700;
            --border: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 32px rgba(255, 255, 255, 0.3);
            --shadow-glow: 0 0 20px rgba(254, 253, 253, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--cyan), 0 0 20px var(--cyan); }
            50% { box-shadow: 0 0 20px var(--cyan), 0 0 40px var(--cyan); }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            cursor: pointer;
            transition: color 0.3s;
            font-size: 14px;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--cyan);
        }

        .security-score-badge {
            text-decoration-color: #2b2d32;
            background: rgb(255, 255, 255);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        /* Page Sections */
        .page-section {
            display: none;
            animation: slideInUp 0.5s ease-out;
        }

        .page-section.active {
            display: block;
        }

        /* Landing Page */
        .hero {
            text-align: center;
            padding: 80px 20px;
            position: relative;
        }

        .hero h1 {
            font-family: 'Courier New', Courier, monospace;
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
            background: white;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-family: 'Courier New', Courier, monospace;
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .btn-primary {
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow-glow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.5);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--cyan);
            padding: 12px 30px;
            border: 1px solid var(--cyan);
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: rgba(0, 217, 255, 0.1);
        }

        /* Threats Grid */
        .threats-section {
            padding: 60px 20px;
        }

        .section-title {
            text-align: center;
            font-size: 32px;
            margin-bottom: 40px;
            color: var(--cyan);
        }

        .threats-grid, .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .threat-card, .module-card {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--border);
            transition: all 0.3s;
            cursor: pointer;
        }

        .threat-card:hover, .module-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-glow);
            border-color: var(--cyan);
        }

        .threat-icon, .module-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .threat-name, .module-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .threat-desc {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .module-topics {
            color: var(--text-dim);
            font-size: 14px;
            margin-top: 10px;
        }

        /* Dashboard */
        .dashboard {
            padding: 40px 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .dashboard-card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score-display {
            font-size: 48px;
            font-weight: 700;
            color: var(--cyan);
            text-align: center;
            margin: 20px 0;
        }

        .score-breakdown {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            text-align: center;
        }

        .stat-box {
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 10px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--cyan);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-dim);
            margin-top: 5px;
        }

        .challenge-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .challenge-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .challenge-meta {
            display: flex;
            gap: 10px;
            font-size: 12px;
            color: var(--text-dim);
        }

        .difficulty-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .difficulty-easy { background: rgba(0, 255, 136, 0.2); color: var(--green); }
        .difficulty-medium { background: rgba(255, 215, 0, 0.2); color: var(--yellow); }
        .difficulty-hard { background: rgba(255, 68, 68, 0.2); color: var(--red); }

        .points-badge {
            background: rgb(3, 228, 7);
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 14px;
        }

        /* Learning Module View */
        .module-header {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }

        .module-title {
            font-size: 32px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--bg-secondary);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--cyan), var(--purple));
            transition: width 0.5s ease;
        }

        .story-card {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(255, 0, 217, 0.1));
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-top: 15px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .lesson-card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .lesson-card:hover {
            transform: translateY(-3px);
            border-color: var(--cyan);
        }

        .lesson-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .lesson-meta {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--text-dim);
            margin-bottom: 15px;
        }

        .lesson-status {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--green);
            font-size: 13px;
            margin-bottom: 15px;
        }

        /* Quiz Section */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .quiz-progress {
            font-size: 14px;
            color: var(--text-dim);
            margin-bottom: 10px;
        }

        .quiz-score {
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
        }

        .question-card {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 25px;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: var(--bg-secondary);
            padding: 15px 20px;
            border: 2px solid var(--border);
            border-radius: 10px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-primary);
            font-size: 16px;
        }

        .option-btn:hover {
            border-color: var(--cyan);
            background: rgba(0, 217, 255, 0.1);
        }

        .option-btn.selected {
            border-color: var(--cyan);
            background: rgba(0, 217, 255, 0.2);
        }

        .option-btn.correct {
            border-color: var(--green);
            background: rgba(0, 255, 136, 0.2);
        }

        .option-btn.incorrect {
            border-color: var(--red);
            background: rgba(255, 68, 68, 0.2);
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .feedback-box {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid var(--cyan);
        }

        .feedback-box.correct {
            border-left-color: var(--green);
        }

        .feedback-box.incorrect {
            border-left-color: var(--red);
        }

        /* Phishing Quiz */
        .email-container {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 25px;
        }

        .email-header {
            background: var(--bg-secondary);
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .email-field {
            margin-bottom: 10px;
            font-size: 14px;
        }

        .email-field strong {
            color: var(--cyan);
            margin-right: 10px;
        }

        .email-body {
            padding: 25px;
            line-height: 1.8;
        }

        .red-flags-section {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .red-flags-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--orange);
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .answer-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .answer-btn {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .answer-btn:hover {
            border-color: var(--cyan);
            background: rgba(0, 217, 255, 0.1);
        }

        .answer-btn.selected {
            border-color: var(--cyan);
            background: rgba(0, 217, 255, 0.2);
        }

        /* Password Strength Checker */
        .password-checker {
            max-width: 700px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .password-input-group {
            margin-bottom: 30px;
        }

        .password-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            margin-bottom: 15px;
        }

        .password-input:focus {
            outline: none;
            border-color: var(--cyan);
        }

        .strength-meter {
            height: 12px;
            background: var(--bg-secondary);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .strength-fill {
            height: 100%;
            transition: all 0.3s;
            border-radius: 10px;
        }

        .strength-weak { background: var(--red); width: 33%; }
        .strength-medium { background: var(--yellow); width: 66%; }
        .strength-strong { background: var(--green); width: 100%; }

        .strength-label {
            font-size: 14px;
            font-weight: 600;
        }

        .strength-feedback {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border);
            margin-top: 20px;
        }

        .feedback-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .tips-sidebar {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-top: 30px;
        }

        .tips-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--cyan);
        }

        .tip-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .tip-item:last-child {
            border-bottom: none;
        }

        /* Achievements Page */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 40px 20px;
        }

        .achievement-card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid var(--border);
            text-align: center;
            transition: all 0.3s;
        }

        .achievement-card.unlocked {
            border-color: var(--cyan);
        }

        .achievement-card.locked {
            opacity: 0.4;
            filter: grayscale(1);
        }

        .achievement-icon {
            font-size: 64px;
            margin-bottom: 15px;
        }

        .achievement-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .achievement-desc {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .achievement-points {
            color: var(--cyan);
            font-weight: 600;
        }

        .achievement-progress {
            margin-top: 15px;
            font-size: 12px;
            color: var(--text-dim);
        }

        /* Leaderboard */
        .leaderboard-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .leaderboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .tab-btn {
            padding: 12px 30px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 25px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: white;
            color: var(--text-primary);
            border-color: transparent;
        }

        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .leaderboard-item {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s;
        }

        .leaderboard-item:hover {
            border-color: var(--cyan);
        }

        .leaderboard-item.current-user {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(255, 0, 217, 0.1));
            border-color: var(--cyan);
        }

        .rank-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
            min-width: 40px;
        }

        .rank-number.top3 {
            font-size: 32px;
        }

        .user-info {
            flex: 1;
        }

        .username {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .user-stats {
            font-size: 13px;
            color: var(--text-dim);
        }

        .user-score {
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            top: 100px;
            right: 30px;
            background:white;
            padding: 20px 25px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            z-index: 1000;
            animation: slideInRight 0.5s ease-out;
            display: none;
        }

        .toast.show {
            display: block;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .toast-icon {
            font-size: 32px;
        }

        .toast-text h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .toast-text p {
            font-size: 13px;
            opacity: 0.9;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 32px;
            }

            .hero p {
                font-size: 16px;
            }

            .section-title {
                font-size: 24px;
            }

            .nav {
                gap: 15px;
            }

            .nav-link {
                font-size: 12px;
            }

            .dashboard-grid, .threats-grid, .modules-grid {
                grid-template-columns: 1fr;
            }

            .answer-buttons {
                flex-direction: column;
            }

            .toast {
                right: 10px;
                left: 10px;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mb-30 {
            margin-bottom: 30px;
        }

        .mt-30 {
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="neural-bg" id="neuralBg"></div>

    <div class="toast" id="toast">
        <div class="toast-content">
            <div class="toast-icon" id="toastIcon">üèÜ</div>
            <div class="toast-text">
                <h4 id="toastTitle">Achievement Unlocked!</h4>
                <p id="toastMessage">You earned a new badge</p>
            </div>
        </div>
    </div>

    <!-- Breach Theory Modal (auto-shown on first load) -->
    <div class="modal-backdrop" id="breachModal" role="dialog" aria-modal="true">
        <div class="modal-card" id="breachModalContent">
            <!-- Content populated by JS -->
        </div>
    </div>

    <!-- Threat Detail Modal -->
    <div class="modal-backdrop" id="threatModal" role="dialog" aria-modal="true">
        <div class="modal-card" id="threatModalContent">
            <!-- Populated by JS -->
        </div>
    </div>

    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span>üõ°Ô∏è</span>
                    <span>SafeLink</span>
                </div>
                <nav class="nav">
                    <a class="nav-link" onclick="navigateTo('landing')">Home</a>
                    <a class="nav-link" onclick="navigateTo('dashboard')">Dashboard</a>
                    <a class="nav-link" onclick="navigateTo('achievements')">Achievements</a>
                    <a class="nav-link" onclick="navigateTo('leaderboard')">Leaderboard</a>
                </nav>
                <div class="security-score-badge" id="headerScore">
                    üèÜ <span id="headerScoreValue">0</span> pts
                </div>
            </div>
        </div>
    </header>

    <section id="landing" class="page-section active">
        <div class="hero">
            <div class="container">
                <h1>Defend Your Digital Identity in the Neural Age</h1>
                <p>Master digital defense through gamified learning. Stop phishing. Strengthen passwords. Protect yourself from neural hijacking.</p>
                <button class="btn-primary" onclick="navigateTo('dashboard')">Start Your Defense Training</button>
            </div>
        </div>

        <div class="threats-section">
            <div class="container">
                <h2 class="section-title">Modern Cyber Threats</h2>
                <div class="threats-grid" id="threatsGrid"></div>
            </div>
        </div>

        <div class="threats-section">
            <div class="container">
                <h2 class="section-title">Learning Modules</h2>
                <div class="modules-grid" id="modulesPreview"></div>
            </div>
        </div>
    </section>

    <section id="dashboard" class="page-section">
        <div class="container dashboard">
            <h2 class="section-title">Your Security Command Center</h2>
            
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3 class="card-title">üèÜ Security Score</h3>
                    <div class="score-display" id="totalScore">0</div>
                    <div class="score-breakdown">
                        <div class="score-item">
                            <span>Password Security</span>
                            <span id="passwordPoints">0 pts</span>
                        </div>
                        <div class="score-item">
                            <span>Phishing Detection</span>
                            <span id="phishingPoints">0 pts</span>
                        </div>
                        <div class="score-item">
                            <span>Achievements</span>
                            <span id="achievementPoints">0 pts</span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3 class="card-title">üìä Learning Progress</h3>
                    <div class="progress-stats">
                        <div class="stat-box">
                            <div class="stat-value" id="modulesCompleted">0</div>
                            <div class="stat-label">Modules Done</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="challengesWon">0</div>
                            <div class="stat-label">Challenges Won</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="currentStreak">0</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3 class="card-title">‚ö° Your Level</h3>
                    <div class="score-display" style="font-size: 32px;" id="userLevel">Novice</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="levelProgress" style="width: 0%"></div>
                    </div>
                    <p class="text-center" style="margin-top: 15px; font-size: 14px; color: var(--text-dim);" id="levelDescription">Complete more challenges to rank up!</p>
                </div>
            </div>

            <div class="dashboard-card mb-30">
                <h3 class="card-title">üéØ Today's Challenges</h3>
                <div id="challengesList"></div>
            </div>

            <div class="dashboard-card mb-30">
                <h3 class="card-title">üí° Recommended for You</h3>
                <div id="recommendedModule"></div>
            </div>

            <h2 class="section-title mt-30">All Learning Modules</h2>
            <div class="modules-grid" id="allModules"></div>
        </div>
    </section>

    <section id="moduleView" class="page-section">
        <div class="container" style="padding: 40px 20px;">
            <button class="btn-secondary mb-20" onclick="navigateTo('dashboard')">‚Üê Back to Dashboard</button>
            
            <div class="module-header" id="moduleHeader"></div>
            
            <div class="lessons-grid" id="lessonsGrid"></div>
        </div>
    </section>

    <section id="lessonView" class="page-section">
        <div class="quiz-container">
            <button class="btn-secondary mb-20" onclick="backToModule()">‚Üê Back to Module</button>
            
            <div class="quiz-header">
                <h2 id="lessonTitle">Lesson Title</h2>
                <div class="quiz-progress" id="quizProgress">Question 1 of 3</div>
                <div class="quiz-score">Score: <span id="quizScore">0</span> pts</div>
            </div>

            <div id="quizContent"></div>
        </div>
    </section>

    <section id="phishingQuiz" class="page-section">
        <div class="quiz-container">
            <button class="btn-secondary mb-20" onclick="navigateTo('dashboard')">‚Üê Back to Dashboard</button>
            
            <div class="quiz-header">
                <h2>üé£ Phishing Detection Challenge</h2>
                <div class="quiz-progress" id="phishingProgress">Email 1 of 3</div>
                <div class="quiz-score">Score: <span id="phishingScore">0</span> pts</div>
            </div>

            <div id="phishingContent"></div>
        </div>
    </section>

    <section id="passwordChecker" class="page-section">
        <div class="password-checker">
            <button class="btn-secondary mb-20" onclick="navigateTo('dashboard')">‚Üê Back to Dashboard</button>
            
            <h2 class="section-title">üîê Password Strength Challenge</h2>
            <p class="text-center" style="color: var(--text-secondary); margin-bottom: 40px;">Create strong passwords and learn what makes them secure</p>

            <div class="password-input-group">
                <label style="font-size: 16px; font-weight: 600; margin-bottom: 10px; display: block;">Enter a password to test:</label>
                <input type="text" class="password-input" id="passwordInput" placeholder="Type your password here..." oninput="checkPasswordStrength()">
                
                <div class="strength-meter">
                    <div class="strength-fill" id="strengthFill"></div>
                </div>
                <div class="strength-label" id="strengthLabel">Enter a password to see its strength</div>
            </div>

            <div class="strength-feedback" id="passwordFeedback"></div>

            <div class="tips-sidebar">
                <h3 class="tips-title">üí° Password Security Tips</h3>
                <div class="tip-item">‚úì Use at least 16 characters</div>
                <div class="tip-item">‚úì Mix uppercase, lowercase, numbers, and symbols</div>
                <div class="tip-item">‚úì Avoid common words and personal information</div>
                <div class="tip-item">‚úì Use a unique password for each account</div>
                <div class="tip-item">‚úì Consider using a password manager</div>
                <div class="tip-item">‚úì Enable multi-factor authentication</div>
            </div>

            <div class="text-center mt-30">
                <button class="btn-primary" onclick="completePasswordChallenge()">Complete Challenge (+50 pts)</button>
            </div>
        </div>
    </section>

    <section id="achievements" class="page-section">
        <div class="container">
            <h2 class="section-title" style="margin-top: 40px;">üèÜ Your Achievements</h2>
            <div class="text-center mb-30">
                <div style="font-size: 48px; font-weight: 700; color: var(--cyan);" id="totalAchievementPoints">0 pts</div>
                <p style="color: var(--text-secondary);">Total Achievement Points</p>
            </div>
            <div class="achievements-grid" id="achievementsGrid"></div>
        </div>
    </section>

    <section id="leaderboard" class="page-section">
        <div class="leaderboard-container">
            <h2 class="section-title">üèÖ Global Leaderboard</h2>
            
            <div class="leaderboard-tabs">
                <button class="tab-btn active" onclick="switchLeaderboard('weekly')">Weekly</button>
                <button class="tab-btn" onclick="switchLeaderboard('monthly')">Monthly</button>
            </div>

            <div class="leaderboard-list" id="leaderboardList"></div>
        </div>
    </section>

    <script>
        // ==================== DATA MODELS ====================
        const gameData = {
            landingPage: {
                threats: [
                    { name: "Neural Hijacking", icon: "üß†", description: "AI-powered attacks targeting cognitive patterns and behavioral data" },
                    { name: "Advanced Phishing", icon: "üé£", description: "Sophisticated social engineering with deepfakes and voice cloning" },
                    { name: "Password Breaches", icon: "üîì", description: "Credential stuffing and mass data leaks compromising millions" },
                    { name: "Digital Impersonation", icon: "üë§", description: "Identity theft using AI-generated content and stolen data" }
                ],
                
                modulesPreview: [
                    { icon: "üîê", name: "Password Security", topics: 4, color: "#00D9FF" },
                    { icon: "üé£", name: "Phishing Detection", topics: 4, color: "#FF00D9" },
                    { icon: "üõ°Ô∏è", name: "Digital Defense", topics: 4, color: "#00FF88" },
                    { icon: "üß†", name: "Neural Hijacking Prevention", topics: 4, color: "#FF6B00" },
                    { id: "id-password-security", icon: "üîì", name: "ID & Password Breaches", topics: 3, color: "#FF8C00" },
                    { id: "credential-hygiene", icon: "üß∞", name: "Credential Hygiene & Recovery", topics: 3, color: "#FFB84D" },
                    { id: "mfa-advanced", icon: "üîê", name: "Advanced MFA & Authentication", topics: 3, color: "#7C4DFF" },
                    { id: "account-recovery", icon: "üõ†Ô∏è", name: "Account Recovery & Response", topics: 3, color: "#FF6B6B" },
                    { id: "password-manager-deep", icon: "üóÑÔ∏è", name: "Password Manager Deep Dive", topics: 3, color: "#4DD0E1" },
                    { id: "social-engineering", icon: "üß©", name: "Social Engineering & Human Factors", topics: 3, color: "#FFA726" },
                    { id: "secure-dev", icon: "üõ†Ô∏è", name: "Secure Development Basics", topics: 3, color: "#8BC34A" },
                    { id: "privacy-data", icon: "üîí", name: "Privacy & Data Minimization", topics: 3, color: "#9C27B0" }
                ]
            },
            modules: [
                {
                    id: "password-security",
                    name: "Password Security Fortress",
                    icon: "üîê",
                    color: "#00D9FF",
                    story: "In 2025, password breaches exposed 5 billion credentials. Are yours safe?",
                    lessons: [
                        {
                            title: "Creating Unbreakable Passwords",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "Which password is strongest?",
                                    options: ["Password123!", "MyDog2024", "T7$mK9@pL2nQ5", "johnsmith1990"],
                                    correct: 2,
                                    explanation: "Option 3 uses random characters, numbers, and symbols with no dictionary words."
                                },
                                {
                                    question: "How long should a strong password be?",
                                    options: ["8 characters", "12 characters", "16+ characters", "No limit needed"],
                                    correct: 2,
                                    explanation: "Security experts recommend 16+ characters for maximum protection."
                                }
                            ]
                        },
                        {
                            title: "Password Manager Mastery",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "What is the main benefit of a password manager?",
                                    options: ["Remembers passwords for you", "Generates strong passwords", "Encrypts your passwords", "All of the above"],
                                    correct: 3,
                                    explanation: "Password managers provide all these benefits, making them essential security tools."
                                }
                            ]
                        },
                        {
                            title: "Multi-Factor Authentication",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "Which MFA method is most secure?",
                                    options: ["SMS codes", "Email codes", "Authenticator app", "Security questions"],
                                    correct: 2,
                                    explanation: "Authenticator apps are more secure than SMS, which can be intercepted."
                                }
                            ]
                        },
                        {
                            title: "Defending Against Credential Attacks",
                            duration: "15 min",
                            quizQuestions: [
                                {
                                    question: "What is credential stuffing?",
                                    options: ["Creating too many passwords", "Using leaked passwords on multiple sites", "Sharing passwords with friends", "Writing passwords down"],
                                    correct: 1,
                                    explanation: "Credential stuffing uses leaked username/password pairs to access accounts on other sites."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "password-manager-deep",
                    name: "Password Manager Deep Dive",
                    icon: "üóÑÔ∏è",
                    color: "#4DD0E1",
                    story: "Why password managers matter, how they store secrets, and best practices for secure use.",
                    lessons: [
                        {
                            title: "How Password Managers Work",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "What is a key advantage of using a password manager?",
                                    options: ["Remembering one master password is insecure", "It encourages password reuse", "It generates and stores unique strong passwords", "It replaces MFA"],
                                    correct: 2,
                                    explanation: "Password managers generate and store strong, unique passwords for each site, reducing reuse risk."
                                }
                            ]
                        },
                        {
                            title: "Choosing & Configuring a Manager",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "Which feature is important when choosing a password manager?",
                                    options: ["No encryption", "Client-side encryption and strong master key", "Only cloud storage", "No backups"],
                                    correct: 1,
                                    explanation: "Client-side encryption and a strong master key protect stored credentials."
                                }
                            ]
                        },
                        {
                            title: "Secure Sharing & Recovery",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "What's a safe way to share credentials?",
                                    options: ["Plain email", "Password manager secure sharing feature", "Posting to chat", "SMS"],
                                    correct: 1,
                                    explanation: "Use built-in secure sharing features of password managers rather than insecure channels."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "social-engineering",
                    name: "Social Engineering & Human Factors",
                    icon: "üß©",
                    color: "#FFA726",
                    story: "Understand persuasion techniques attackers use and how human factors influence security decisions.",
                    lessons: [
                        {
                            title: "Common Social Engineering Tactics",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "Which tactic is common in social engineering?",
                                    options: ["Using only technical exploits", "Urgency and authority to pressure victims", "Always using perfect grammar", "Never sending links"],
                                    correct: 1,
                                    explanation: "Attackers exploit urgency and perceived authority to push victims into making mistakes."
                                }
                            ]
                        },
                        {
                            title: "Defensive Communication Practices",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "What is a safe response to an unexpected urgent request?",
                                    options: ["Comply immediately", "Verify via independent channels", "Forward to others blindly", "Click provided links"],
                                    correct: 1,
                                    explanation: "Always verify urgent requests via trusted channels before acting."
                                }
                            ]
                        },
                        {
                            title: "Reducing Human Error",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "Which practice reduces human errors in security?",
                                    options: ["No training", "Regular simulated phishing + clear policies", "Sharing passwords", "Ignoring alerts"],
                                    correct: 1,
                                    explanation: "Training, simulations, and clear policies help users recognize and avoid scams."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "secure-dev",
                    name: "Secure Development Basics",
                    icon: "üõ†Ô∏è",
                    color: "#8BC34A",
                    story: "Introduce secure coding principles, dependency hygiene, and basic application hardening techniques.",
                    lessons: [
                        {
                            title: "Threat Modeling & Secure Defaults",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "What is a secure default?",
                                    options: ["Open ports by default", "Least privilege configuration", "Verbose logging of secrets", "Default admin/admin credentials"],
                                    correct: 1,
                                    explanation: "Least privilege reduces attack surface by only granting necessary permissions."
                                }
                            ]
                        },
                        {
                            title: "Dependency & Supply Chain Hygiene",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "A good practice for dependencies is:",
                                    options: ["Use unverified packages", "Pin versions and verify integrity", "Never update", "Ignore vulnerability alerts"],
                                    correct: 1,
                                    explanation: "Pinning versions and monitoring vulnerabilities helps maintain supply chain security."
                                }
                            ]
                        },
                        {
                            title: "Code Review & Static Analysis",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "Which helps catch security bugs early?",
                                    options: ["No reviews", "Automated static analysis + peer code reviews", "Only manual testing", "Deploy without tests"],
                                    correct: 1,
                                    explanation: "Combining automated tools and peer reviews finds issues before deployment."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "privacy-data",
                    name: "Privacy & Data Minimization",
                    icon: "üîí",
                    color: "#9C27B0",
                    story: "Best practices for collecting, storing, and retaining minimal personal data to reduce impact of breaches.",
                    lessons: [
                        {
                            title: "Principles of Data Minimization",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "Data minimization means:",
                                    options: ["Collect everything", "Only collect what is necessary", "Keep data forever", "Share data openly"],
                                    correct: 1,
                                    explanation: "Collecting only necessary data reduces risk and regulatory burden."
                                }
                            ]
                        },
                        {
                            title: "Anonymization & Pseudonymization",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "Which technique helps protect user identities in datasets?",
                                    options: ["Storing raw PII with no controls", "Pseudonymization or anonymization", "Publishing all data", "Using easy-to-guess IDs"],
                                    correct: 1,
                                    explanation: "Pseudonymization and anonymization reduce re-identification risks."
                                }
                            ]
                        },
                        {
                            title: "Retention Policies & Legal Considerations",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "Good retention policy practice is to:",
                                    options: ["Keep data indefinitely", "Define clear retention limits and delete when expired", "Ignore regulations", "Duplicate data everywhere"],
                                    correct: 1,
                                    explanation: "Clear retention and deletion policies limit exposure and help compliance."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "phishing-detection",
                    name: "Phishing Detection Academy",
                    icon: "üé£",
                    color: "#FF00D9",
                    story: "A colleague's email seems urgent. But something feels off. Can you spot the trap?",
                    lessons: [
                        {
                            title: "Spotting Email Red Flags",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "Which is a common phishing red flag?",
                                    options: ["Urgent deadline", "Personalized greeting", "Company logo", "Proper grammar"],
                                    correct: 0,
                                    explanation: "Urgency is a classic phishing tactic to pressure victims into acting quickly."
                                }
                            ]
                        },
                        {
                            title: "URL Inspection Techniques",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "Which domain is suspicious?",
                                    options: ["amazon.com", "amaz0n.com", "www.amazon.com", "amazon.co.uk"],
                                    correct: 1,
                                    explanation: "The zero (0) replacing the 'o' is a common phishing technique called typosquatting."
                                }
                            ]
                        },
                        {
                            title: "Social Engineering Tactics",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "What is pretexting in phishing?",
                                    options: ["Sending random emails", "Creating a false scenario to gain trust", "Using technical jargon", "Spoofing email addresses"],
                                    correct: 1,
                                    explanation: "Pretexting involves creating a believable scenario to manipulate the victim."
                                }
                            ]
                        },
                        {
                            title: "Advanced Phishing Defense",
                            duration: "15 min",
                            quizQuestions: [
                                {
                                    question: "How can you verify a suspicious email?",
                                    options: ["Click the link to check", "Reply to the sender", "Contact the company through official channels", "Forward to friends"],
                                    correct: 2,
                                    explanation: "Always verify through official channels, never through the suspicious email itself."
                                }
                            ]
                        }
                    ]
                },
                // --- NEW MODULE 1: Digital Defense Fundamentals ---
                {
                    id: "digital-defense",
                    name: "Digital Defense Fundamentals",
                    icon: "üõ°Ô∏è",
                    color: "#00FF88",
                    story: "Your personal data is under constant surveillance. Learn the basic, indispensable strategies to lock down your devices and privacy.",
                    lessons: [
                        {
                            title: "Securing Your Home Network",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "What is the most critical first step to securing a Wi-Fi router?",
                                    options: ["Disable broadcasting the SSID", "Change the default password", "Enable a Guest Network", "Install a firewall"],
                                    correct: 1,
                                    explanation: "The default password is easy for hackers to guess or find online. Changing it is mandatory."
                                }
                            ]
                        },
                        {
                            title: "Software Updates and Patching",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "What is the primary purpose of a software security patch?",
                                    options: ["To add new features to the software", "To fix known security vulnerabilities", "To improve the user interface", "To speed up the software"],
                                    correct: 1,
                                    explanation: "Patches fix vulnerabilities that hackers exploit to gain unauthorized access."
                                }
                            ]
                        },
                        {
                            title: "Privacy Settings Mastery",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "Which type of data tracking is most invasive to your privacy?",
                                    options: ["First-party cookies", "Third-party cookies", "Session cookies", "Flash cookies"],
                                    correct: 1,
                                    explanation: "Third-party cookies track your activity across different websites, creating a highly detailed profile."
                                }
                            ]
                        },
                        {
                            title: "Mobile Device Security",
                            duration: "15 min",
                            quizQuestions: [
                                {
                                    question: "Why should you avoid using public, unsecured Wi-Fi for sensitive tasks?",
                                    options: ["It slows down your connection", "Your screen can be viewed by others", "It allows eavesdropping via Man-in-the-Middle attacks", "The hotspot provider can steal your phone"],
                                    correct: 2,
                                    explanation: "Unsecured public Wi-Fi is vulnerable to Man-in-the-Middle attacks, where a hacker intercepts your data."
                                }
                            ]
                        }
                    ]
                },
                // --- NEW MODULE 2: Neural Hijacking Prevention ---
                {
                    id: "neural-hijacking",
                    name: "Neural Hijacking Prevention",
                    icon: "üß†",
                    color: "#FF6B00",
                    story: "AI is the new frontier of cyber warfare. Learn how to protect your cognitive and behavioral data from advanced, intelligent adversaries.",
                    lessons: [
                        {
                            title: "Understanding Deepfake Threats",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "What is the biggest threat posed by AI-generated 'deepfake' voice and video?",
                                    options: ["They look too realistic in movies", "They allow for sophisticated digital impersonation and fraud", "They require too much computing power", "They can't be used for criminal activity"],
                                    correct: 1,
                                    explanation: "Deepfakes enable convincing impersonation, making social engineering attacks extremely effective."
                                }
                            ]
                        },
                        {
                            title: "Biometric Security Best Practices",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "Which is a general vulnerability of biometric authentication (e.g., fingerprint, face ID)?",
                                    options: ["It's always faster than a password", "The biometric data can be stolen and replicated", "It can only be used on expensive phones", "It doesn't work in the dark"],
                                    correct: 1,
                                    explanation: "Once biometric data is compromised, it cannot be changed, unlike a password."
                                }
                            ]
                        },
                        {
                            title: "Defending Against Behavioral Profiling",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "What is 'Behavioral Profiling' used by cyber adversaries?",
                                    options: ["Predicting your online purchases", "Analyzing typing speed, mouse movement, and usage patterns", "Tracking your heart rate", "Guessing your favorite color"],
                                    correct: 1,
                                    explanation: "Behavioral profiling builds a model of how you interact with devices, which can be used to bypass security checks."
                                }
                            ]
                        },
                        {
                            title: "Protecting Data from AI Analysis",
                            duration: "15 min",
                            quizQuestions: [
                                {
                                    question: "What technique can help 'poison' AI training data to disrupt profiling?",
                                    options: ["Using all caps in every email", "Deleting your browser history frequently", "Using privacy-enhancing browser extensions and tools", "Never buying anything online"],
                                    correct: 2,
                                    explanation: "Tools that introduce noise or use anonymizing techniques can make your data less useful for AI profiling and analysis."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "id-password-security",
                    name: "ID & Password Security",
                    icon: "üîì",
                    color: "#FF8C00",
                    story: "ID and password security occur when attackers gain unauthorized access to stored credentials via data leaks, credential stuffing, or insecure storage. This module covers how breaches happen, how attackers reuse credentials, and practical steps to detect and recover from a compromise.",
                    lessons: [
                        {
                            title: "Theory: How Breaches Happen",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "What is a common source of leaked credentials?",
                                    options: ["Using a password manager", "Data leaks from third-party services", "Enabling MFA", "Strong unique passwords"],
                                    correct: 1,
                                    explanation: "Data breaches at third-party services frequently expose username/password pairs that attackers reuse elsewhere."
                                }
                            ]
                        },
                        {
                            title: "Attack Vectors & Credential Stuffing",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "What does credential stuffing involve?",
                                    options: ["Brute-forcing single account", "Using leaked credential lists across many sites", "Encrypting password databases", "Monitoring network traffic"],
                                    correct: 1,
                                    explanation: "Credential stuffing uses lists of leaked credentials to attempt logins across multiple services."
                                }
                            ]
                        },
                        {
                            title: "Responding After a Breach",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "If a service you use is breached, what's the best immediate action?",
                                    options: ["Ignore the notice", "Change the password and enable MFA", "Share credentials with colleagues", "Use the same password on other sites"],
                                    correct: 1,
                                    explanation: "Changing the password and enabling multi-factor authentication reduces the risk of account takeover."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "credential-hygiene",
                    name: "Credential Hygiene & Recovery",
                    icon: "üß∞",
                    color: "#FFB84D",
                    story: "Learn how to detect compromised accounts, recover them safely, and maintain credential hygiene to prevent future breaches.",
                    lessons: [
                        {
                            title: "Detecting a Compromise",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "Which sign most likely indicates an account compromise?",
                                    options: ["A routine login from your device", "Unexpected password reset emails", "Receiving regular newsletters", "No notifications at all"],
                                    correct: 1,
                                    explanation: "Unexpected password reset messages or login alerts often signal unauthorized access attempts."
                                }
                            ]
                        },
                        {
                            title: "Safe Recovery Steps",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "What's the best immediate action when you suspect an account was breached?",
                                    options: ["Delete the account", "Change the password from a secure device and enable MFA", "Share the issue on social media", "Continue using the account"],
                                    correct: 1,
                                    explanation: "Change the password (from a trusted device), enable multi-factor authentication, and review account activity."
                                }
                            ]
                        },
                        {
                            title: "Monitoring & Prevention",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "Which tool helps you learn if your email was part of a data breach?",
                                    options: ["Reusing passwords", "Have I Been Pwned (or similar breach notification services)", "Ignoring security updates", "Sharing passwords with family"],
                                    correct: 1,
                                    explanation: "Breach notification services alert you when your email appears in known data leaks so you can take action."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "mfa-advanced",
                    name: "Advanced MFA & Authentication",
                    icon: "üîê",
                    color: "#7C4DFF",
                    story: "Deep dive into multi-factor authentication, hardware security keys, and phishing-resistant protocols.",
                    lessons: [
                        {
                            title: "MFA Methods Compared",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "Which MFA method is most phishing-resistant?",
                                    options: ["SMS codes", "Authenticator app", "Hardware security key (FIDO2)", "Email codes"],
                                    correct: 2,
                                    explanation: "Hardware security keys implement cryptographic protocols that resist phishing attacks."
                                }
                            ]
                        },
                        {
                            title: "Implementing WebAuthn & Security Keys",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "What standard enables passwordless, phishing-resistant logins?",
                                    options: ["OAuth2", "WebAuthn/FIDO2", "SAML", "OpenID Connect"],
                                    correct: 1,
                                    explanation: "WebAuthn/FIDO2 enables public-key based authentication that's phishing-resistant."
                                }
                            ]
                        },
                        {
                            title: "MFA UX and Backup Codes",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "What's a safe place to store MFA backup codes?",
                                    options: ["Public cloud notes", "Encrypted password manager", "On paper stuck to monitor", "Shared email"],
                                    correct: 1,
                                    explanation: "Encrypted password managers provide secure storage for backup codes."
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "account-recovery",
                    name: "Account Recovery & Response",
                    icon: "üõ†Ô∏è",
                    color: "#FF6B6B",
                    story: "How to perform account recovery, secure compromised accounts, and coordinate incident response.",
                    lessons: [
                        {
                            title: "Recovery Policies & Trusted Contacts",
                            duration: "8 min",
                            quizQuestions: [
                                {
                                    question: "What's safer for recovery, trusted contacts or SMS recovery?",
                                    options: ["Trusted contacts", "SMS codes", "Both equal", "Neither"],
                                    correct: 0,
                                    explanation: "Trusted contacts with verification are typically safer than SMS, which can be intercepted."
                                }
                            ]
                        },
                        {
                            title: "Evidence & Reporting",
                            duration: "10 min",
                            quizQuestions: [
                                {
                                    question: "When reporting a breach to a provider, what helps the most?",
                                    options: ["A screenshot of suspicious activity", "Posting on social media", "Deleting the account", "Ignoring it"],
                                    correct: 0,
                                    explanation: "Screenshots and timestamps aid support teams to verify and respond to incidents quickly."
                                }
                            ]
                        },
                        {
                            title: "Coordinating Response",
                            duration: "12 min",
                            quizQuestions: [
                                {
                                    question: "After securing an account, you should:",
                                    options: ["Do nothing else", "Scan devices for malware and update passwords", "Share passwords with others", "Continue old sessions"],
                                    correct: 1,
                                    explanation: "Scan and clean infected devices, rotate credentials, and review connected apps to prevent reinfection."
                                }
                            ]
                        }
                    ]
                }
            ],
            phishingScenarios: [
                {
                    id: 1,
                    from: "security@paypa1-verify.com",
                    subject: "URGENT: Verify your account now",
                    body: "Your account has been locked due to suspicious activity. Click here to verify immediately or your account will be permanently deleted within 24 hours.",
                    isPhishing: true,
                    redFlags: [
                        "Misspelled domain (paypa1 vs paypal)",
                        "Urgent language and threats",
                        "Generic greeting",
                        "Suspicious link"
                    ],
                    explanation: "This is a classic phishing attempt using urgency, fear tactics, and domain spoofing."
                },
                {
                    id: 2,
                    from: "team@github.com",
                    subject: "Your pull request was merged",
                    body: "Hi Sarah, John Doe merged your pull request #1234 'Fix login bug' into the main branch. View details in your repository.",
                    isPhishing: false,
                    redFlags: [],
                    explanation: "This is legitimate: proper domain, personalized content, specific details, and no urgency or suspicious links."
                },
                {
                    id: 3,
                    from: "admin@yourbank-secure.net",
                    subject: "Account Alert: Unusual Activity Detected",
                    body: "We noticed unusual activity on your account. Please verify your identity by clicking the link below and entering your account credentials.",
                    isPhishing: true,
                    redFlags: [
                        "Wrong domain (banks use specific domains)",
                        "Asking for credentials via email",
                        "Vague 'unusual activity'",
                        "Pressure to act immediately"
                    ],
                    explanation: "Banks never ask for credentials via email. The domain is fake and designed to steal your login."
                }
            ],
            achievements: [
                { name: "First Steps", icon: "üéØ", description: "Complete your first lesson", points: 10, requirement: 1, type: 'lessons' },
                { name: "Phish Slayer", icon: "üé£", description: "Identify 10 phishing emails correctly", points: 50, requirement: 10, type: 'phishing' },
                { name: "Password Master", icon: "üîê", description: "Pass all password security lessons", points: 50, requirement: 4, type: 'password-module' },
                { name: "Week Warrior", icon: "üî•", description: "7-day learning streak", points: 100, requirement: 7, type: 'streak' },
                { name: "Neural Defender", icon: "üß†", description: "Complete Neural Hijacking module", points: 200, requirement: 4, type: 'neural-module' }, // Updated requirement to 4 lessons
                { name: "Security Champion", icon: "üèÜ", description: "Reach 1000+ security points", points: 500, requirement: 1000, type: 'points' }
            ],
            leaderboard: [
                { rank: 1, username: "CyberGuardian", score: 2450, badges: 12 },
                { rank: 2, username: "DigitalDefender", score: 2280, badges: 11 },
                { rank: 3, username: "PhishHunter", score: 2150, badges: 10 },
                { rank: 4, username: "SecurityNinja", score: 1920, badges: 9 },
                { rank: 5, username: "CyberSentinel", score: 1875, badges: 9 }
            ]
        };

        // User Progress State
        const userProgress = {
            totalScore: 0,
            passwordPoints: 0,
            phishingPoints: 0,
            achievementPoints: 0,
            modulesCompleted: 0,
            challengesWon: 0,
            currentStreak: 0,
            lessonsCompleted: [],
            phishingCorrect: 0,
            unlockedAchievements: [],
            moduleProgress: {}
        };

        let currentModule = null;
        let currentLesson = null;
        let currentQuestionIndex = 0;
        let currentQuizScore = 0;
        let currentPhishingIndex = 0;
        let currentPhishingScore = 0;
        let selectedAnswer = null;

        // ==================== INITIALIZATION ====================
        function init() {
            // Ensure module progress is initialized for all modules (even if 0)
            gameData.modules.forEach(module => {
                if (!userProgress.moduleProgress[module.id]) {
                    userProgress.moduleProgress[module.id] = 0;
                }
            });

            createNeuralBackground();
            renderLandingPage();
            updateAllScores();
        }

        function createNeuralBackground() {
            const bg = document.getElementById('neuralBg');
            const dotCount = 30;
            
            for (let i = 0; i < dotCount; i++) {
                const dot = document.createElement('div');
                dot.className = 'neural-dot';
                dot.style.left = Math.random() * 100 + '%';
                dot.style.top = Math.random() * 100 + '%';
                dot.style.animationDelay = Math.random() * 3 + 's';
                bg.appendChild(dot);
            }
        }

        // ==================== NAVIGATION ====================
        function navigateTo(page) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(page).classList.add('active');
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // Update active nav link
            const navLinks = document.querySelectorAll('.nav-link');
            // Nav links are Home[0], Dashboard[1], Achievements[2], Leaderboard[3]
            if (page === 'landing') navLinks[0].classList.add('active');
            else if (page === 'dashboard' || page === 'moduleView' || page === 'lessonView' || page === 'phishingQuiz' || page === 'passwordChecker') navLinks[1].classList.add('active');
            else if (page === 'achievements') navLinks[2].classList.add('active');
            else if (page === 'leaderboard') navLinks[3].classList.add('active');

            // Render page-specific content
            if (page === 'dashboard') renderDashboard();
            else if (page === 'achievements') renderAchievements();
            else if (page === 'leaderboard') renderLeaderboard();
            else if (page === 'phishingQuiz') startPhishingQuiz();

            window.scrollTo(0, 0);
        }

        // ==================== LANDING PAGE ====================
        function renderLandingPage() {
            // Render threats (create DOM nodes so we can attach click handlers)
            const threatsGrid = document.getElementById('threatsGrid');
            threatsGrid.innerHTML = '';
            gameData.landingPage.threats.forEach(threat => {
                const card = document.createElement('div');
                card.className = 'threat-card';
                card.addEventListener('click', () => showThreatModal(threat));

                card.innerHTML = `
                    <div class="threat-icon">${threat.icon}</div>
                    <div class="threat-name">${threat.name}</div>
                    <div class="threat-desc">${threat.description}</div>
                `;

                threatsGrid.appendChild(card);
            });

            // Render modules preview (create DOM nodes and attach listeners to avoid inline onclick quoting issues)
            const modulesPreview = document.getElementById('modulesPreview');
            modulesPreview.innerHTML = '';
            gameData.landingPage.modulesPreview.forEach(mod => {
                const card = document.createElement('div');
                card.className = 'module-card';
                const targetId = mod.id || mod.name.toLowerCase().replace(/\s/g, '-');
                card.addEventListener('click', () => openModule(targetId));

                card.innerHTML = `
                    <div class="module-icon">${mod.icon}</div>
                    <div class="module-name">${mod.name}</div>
                    <div class="module-topics">${mod.topics} learning topics</div>
                `;

                modulesPreview.appendChild(card);
            });
        }

        // ==================== DASHBOARD ====================
        function renderDashboard() {
            updateAllScores();
            renderChallenges();
            renderRecommendedModule();
            renderAllModules();
        }

        function renderChallenges() {
            const challenges = [
                { title: "Phishing Email Detection", difficulty: "easy", points: 30, action: () => navigateTo('phishingQuiz') },
                { title: "Password Strength Test", difficulty: "medium", points: 50, action: () => navigateTo('passwordChecker') },
                { 
                    title: "Digital Defense Quiz", 
                    difficulty: "hard", 
                    points: 100, 
                    action: () => {
                        const module = gameData.modules.find(m => m.id === 'digital-defense');
                        if (module) {
                            // Start the first lesson of the Digital Defense module
                            currentModule = module;
                            startLesson(0); 
                        } else {
                            alert('Module not found!');
                        }
                    } 
                }
            ];

            const challengesList = document.getElementById('challengesList');
            challengesList.innerHTML = challenges.map((challenge, index) => {
                // Simplified way to track if challenge is 'complete' for demonstration purposes
                let isComplete = false;
                if (challenge.title.includes('Phishing') && userProgress.phishingCorrect >= gameData.phishingScenarios.length) isComplete = true;
                // Password challenge is "completed" once, but can be done again
                if (challenge.title.includes('Password') && userProgress.challengesWon > 0) isComplete = false; 

                return `
                    <div class="challenge-item">
                        <div class="challenge-info">
                            <h4>${challenge.title} ${isComplete ? ' (Done)' : ''}</h4>
                            <div class="challenge-meta">
                                <span class="difficulty-badge difficulty-${challenge.difficulty}">${challenge.difficulty.toUpperCase()}</span>
                                <span>‚è±Ô∏è 10-15 min</span>
                            </div>
                        </div>
                        <button class="points-badge" onclick="startChallenge(${index})" ${isComplete && challenge.title.includes('Phishing') ? 'disabled' : ''}>
                            +${challenge.points} pts
                        </button>
                    </div>
                `;
            }).join('');

            window.startChallenge = function(index) {
                challenges[index].action();
            };
        }

        function renderRecommendedModule() {
            // Recommend the module with the lowest progress
            let recommended = gameData.modules[0];
            let lowestProgress = userProgress.moduleProgress[recommended.id] || 0;

            gameData.modules.forEach(module => {
                const progress = userProgress.moduleProgress[module.id] || 0;
                if (progress < lowestProgress) {
                    lowestProgress = progress;
                    recommended = module;
                }
            });
            
            const progress = lowestProgress;
            
            document.getElementById('recommendedModule').innerHTML = `
                <div class="challenge-item">
                    <div class="challenge-info">
                        <h4>${recommended.icon} ${recommended.name}</h4>
                        <div class="challenge-meta">
                            <span>üìö ${recommended.lessons.length} lessons</span>
                            <span>Progress: ${progress}%</span>
                        </div>
                    </div>
                    <button class="btn-secondary" onclick="openModule('${recommended.id}')">
                        Start Learning
                    </button>
                </div>
            `;
        }

        function renderAllModules() {
            const allModules = document.getElementById('allModules');
            allModules.innerHTML = gameData.modules.map(module => {
                const progress = userProgress.moduleProgress[module.id] || 0;
                return `
                    <div class="module-card" onclick="openModule('${module.id}')">
                        <div class="module-icon">${module.icon}</div>
                        <div class="module-name">${module.name}</div>
                        <div class="module-topics">${module.lessons.length} lessons</div>
                        <div class="progress-bar" style="margin-top: 15px;">
                            <div class="progress-fill" style="width: ${progress}%; background: ${module.color};"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ==================== MODULE VIEW ====================
        function openModule(moduleId) {
            currentModule = gameData.modules.find(m => m.id === moduleId);
            if (!currentModule) {
                // Handle cases where preview link uses simplified name
                if (moduleId === 'password-security') currentModule = gameData.modules[0];
                else if (moduleId === 'phishing-detection') currentModule = gameData.modules[1];
                else if (moduleId === 'digital-defense-fundamentals') currentModule = gameData.modules[2];
                else if (moduleId === 'neural-hijacking-prevention') currentModule = gameData.modules[3];
                if (!currentModule) return;
                moduleId = currentModule.id;
            }

            const progress = userProgress.moduleProgress[moduleId] || 0;
            
            document.getElementById('moduleHeader').innerHTML = `
                <div class="module-title">
                    <span>${currentModule.icon}</span>
                    <span>${currentModule.name}</span>
                </div>
                <div class="story-card">${currentModule.story}</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${progress}%; background: ${currentModule.color};"></div>
                </div>
                <div style="text-align: center; margin-top: 10px; font-size: 14px; color: var(--text-dim);">
                    ${progress}% Complete
                </div>
            `;

            const lessonsGrid = document.getElementById('lessonsGrid');
            lessonsGrid.innerHTML = currentModule.lessons.map((lesson, index) => {
                const lessonKey = `${moduleId}-${index}`;
                const completed = userProgress.lessonsCompleted.includes(lessonKey);
                
                return `
                    <div class="lesson-card">
                        <div class="lesson-title">${lesson.title}</div>
                        <div class="lesson-meta">
                            <span>‚è±Ô∏è ${lesson.duration}</span>
                            <span>üìù ${lesson.quizQuestions.length} questions</span>
                        </div>
                        ${completed ? '<div class="lesson-status">‚úì Completed</div>' : ''}
                        <button class="btn-primary" onclick="startLesson(${index})" style="width: 100%;">
                            ${completed ? 'Review Lesson' : 'Start Lesson'}
                        </button>
                    </div>
                `;
            }).join('');

            navigateTo('moduleView');
        }

        function backToModule() {
            if (currentModule) {
                openModule(currentModule.id);
            }
        }

        // ==================== LESSON & QUIZ ====================
        function startLesson(lessonIndex) {
            currentLesson = currentModule.lessons[lessonIndex];
            currentQuestionIndex = 0;
            currentQuizScore = 0;
            selectedAnswer = null;

            document.getElementById('lessonTitle').textContent = currentLesson.title;
            renderQuizQuestion();
            navigateTo('lessonView');
        }

        function renderQuizQuestion() {
            const question = currentLesson.quizQuestions[currentQuestionIndex];
            const totalQuestions = currentLesson.quizQuestions.length;

            document.getElementById('quizProgress').textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
            document.getElementById('quizScore').textContent = currentQuizScore;

            document.getElementById('quizContent').innerHTML = `
                <div class="question-card">
                    <div class="question-text">${question.question}</div>
                    <div class="options-list">
                        ${question.options.map((option, index) => `
                            <button class="option-btn" onclick="selectAnswer(${index})" id="option-${index}">
                                ${option}
                            </button>
                        `).join('')}
                    </div>
                    <div id="feedback" class="hidden"></div>
                </div>
                <div class="text-center mt-30">
                    <button class="btn-primary" onclick="submitAnswer()" id="submitBtn">Submit Answer</button>
                </div>
            `;
        }

        function selectAnswer(index) {
            selectedAnswer = index;
            document.querySelectorAll('.option-btn').forEach((btn, i) => {
                btn.classList.remove('selected');
                if (i === index) btn.classList.add('selected');
            });
        }

        function submitAnswer() {
            if (selectedAnswer === null) {
                alert('Please select an answer');
                return;
            }

            const question = currentLesson.quizQuestions[currentQuestionIndex];
            const isCorrect = selectedAnswer === question.correct;
            
            // Score tracking based on module
            let pointsEarned = 20;
            if (isCorrect) {
                currentQuizScore += pointsEarned;
                if (currentModule.id === 'password-security') userProgress.passwordPoints += pointsEarned;
                else if (currentModule.id === 'phishing-detection') userProgress.phishingPoints += pointsEarned;
                else if (currentModule.id === 'digital-defense') userProgress.passwordPoints += pointsEarned; // For simplicity, grouping new modules' points
                else if (currentModule.id === 'neural-hijacking') userProgress.phishingPoints += pointsEarned; // For simplicity, grouping new modules' points
                else userProgress.passwordPoints += pointsEarned; // Default fallback
            }

            // Show feedback
            document.querySelectorAll('.option-btn').forEach((btn, i) => {
                btn.disabled = true;
                if (i === question.correct) {
                    btn.classList.add('correct');
                } else if (i === selectedAnswer && !isCorrect) {
                    btn.classList.add('incorrect');
                }
            });

            const feedbackDiv = document.getElementById('feedback');
            feedbackDiv.className = `feedback-box ${isCorrect ? 'correct' : 'incorrect'}`;
            feedbackDiv.innerHTML = `
                <h4>${isCorrect ? '‚úì Correct!' : '‚úó Incorrect'}</h4>
                <p>${question.explanation}</p>
            `;
            feedbackDiv.classList.remove('hidden');

            document.getElementById('submitBtn').textContent = 'Next Question';
            document.getElementById('submitBtn').onclick = nextQuestion;
        }

        function nextQuestion() {
            currentQuestionIndex++;
            selectedAnswer = null;

            if (currentQuestionIndex < currentLesson.quizQuestions.length) {
                renderQuizQuestion();
            } else {
                completeLesson();
            }
        }

        function completeLesson() {
            const lessonKey = `${currentModule.id}-${currentModule.lessons.indexOf(currentLesson)}`;
            
            if (!userProgress.lessonsCompleted.includes(lessonKey)) {
                userProgress.lessonsCompleted.push(lessonKey);
                userProgress.challengesWon++;
                
                // Check for first lesson achievement
                if (userProgress.lessonsCompleted.length === 1) {
                    unlockAchievement('First Steps');
                }
            }

            // Update module progress
            const completedInModule = userProgress.lessonsCompleted.filter(l => l.startsWith(currentModule.id)).length;
            const totalInModule = currentModule.lessons.length;
            userProgress.moduleProgress[currentModule.id] = Math.round((completedInModule / totalInModule) * 100);

            // Check for module completion achievements
            if (completedInModule === totalInModule) {
                userProgress.modulesCompleted++;
                if (currentModule.id === 'password-security') {
                    unlockAchievement('Password Master');
                } else if (currentModule.id === 'neural-hijacking') {
                    unlockAchievement('Neural Defender');
                }
            }

            updateAllScores();

            document.getElementById('quizContent').innerHTML = `
                <div class="question-card text-center">
                    <div style="font-size: 64px; margin-bottom: 20px;">üéâ</div>
                    <h2>Lesson Complete!</h2>
                    <div class="score-display" style="font-size: 36px; margin: 20px 0;">
                        +${currentQuizScore} pts
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 30px;">
                        You've mastered this topic! Keep learning to unlock more achievements.
                    </p>
                    <button class="btn-primary" onclick="backToModule()">Back to Module</button>
                </div>
            `;
        }

        // ==================== PHISHING QUIZ ====================
        function startPhishingQuiz() {
            currentPhishingIndex = 0;
            currentPhishingScore = 0;
            renderPhishingQuestion();
            // Ensure the correct section is active if navigating directly
            navigateTo('phishingQuiz'); 
        }

        function renderPhishingQuestion() {
            const scenario = gameData.phishingScenarios[currentPhishingIndex];
            const total = gameData.phishingScenarios.length;

            document.getElementById('phishingProgress').textContent = `Email ${currentPhishingIndex + 1} of ${total}`;
            document.getElementById('phishingScore').textContent = currentPhishingScore;

            document.getElementById('phishingContent').innerHTML = `
                <div class="email-container">
                    <div class="email-header">
                        <div class="email-field"><strong>From:</strong> ${scenario.from}</div>
                        <div class="email-field"><strong>Subject:</strong> ${scenario.subject}</div>
                    </div>
                    <div class="email-body">${scenario.body}</div>
                </div>

                <div class="red-flags-section">
                    <div class="red-flags-title">üö© Potential Red Flags (Check all that apply):</div>
                    ${scenario.redFlags.map((flag, index) => `
                        <label class="checkbox-item">
                            <input type="checkbox" id="flag-${index}" value="${flag}" disabled>
                            <span>${flag}</span>
                        </label>
                    `).join('')}
                    ${!scenario.isPhishing ? '<label class="checkbox-item"><input type="checkbox" id="flag-none" value="none" disabled><span>No red flags detected</span></label>' : ''}
                </div>

                <div class="answer-buttons">
                    <button class="answer-btn" onclick="answerPhishing(false)" id="legitBtn">‚úì Legitimate Email</button>
                    <button class="answer-btn" onclick="answerPhishing(true)" id="phishBtn">‚ö†Ô∏è Phishing Attempt</button>
                </div>

                <div id="phishingFeedback" class="hidden"></div>

                <div class="text-center mt-30">
                    <button class="btn-primary hidden" onclick="nextPhishingQuestion()" id="nextPhishBtn">Next Email</button>
                </div>
            `;
        }

        function answerPhishing(userSaysPhishing) {
            const scenario = gameData.phishingScenarios[currentPhishingIndex];
            const isCorrect = userSaysPhishing === scenario.isPhishing;

            if (isCorrect) {
                currentPhishingScore += 30;
                userProgress.phishingPoints += 30;
                userProgress.phishingCorrect++;
                userProgress.challengesWon++;

                // Check for phishing achievement
                if (userProgress.phishingCorrect >= 10) {
                    unlockAchievement('Phish Slayer');
                }
            }

            document.getElementById('legitBtn').disabled = true;
            document.getElementById('phishBtn').disabled = true;

            const feedbackDiv = document.getElementById('phishingFeedback');
            feedbackDiv.className = `feedback-box ${isCorrect ? 'correct' : 'incorrect'}`;
            feedbackDiv.innerHTML = `
                <h4>${isCorrect ? '‚úì Correct!' : '‚úó Incorrect'}</h4>
                <p><strong>${scenario.isPhishing ? 'This is a PHISHING email' : 'This is a LEGITIMATE email'}</strong></p>
                <p>${scenario.explanation}</p>
                ${scenario.redFlags.length > 0 ? `<p style="margin-top: 15px;"><strong>Red Flags:</strong></p><ul style="margin-left: 20px;">${scenario.redFlags.map(f => `<li>${f}</li>`).join('')}</ul>` : ''}
            `;
            feedbackDiv.classList.remove('hidden');

            document.getElementById('nextPhishBtn').classList.remove('hidden');
            updateAllScores();
        }

        function nextPhishingQuestion() {
            currentPhishingIndex++;

            if (currentPhishingIndex < gameData.phishingScenarios.length) {
                renderPhishingQuestion();
            } else {
                completePhishingQuiz();
            }
        }

        function completePhishingQuiz() {
            document.getElementById('phishingContent').innerHTML = `
                <div class="question-card text-center">
                    <div style="font-size: 64px; margin-bottom: 20px;">üé£</div>
                    <h2>Phishing Challenge Complete!</h2>
                    <div class="score-display" style="font-size: 36px; margin: 20px 0;">
                        +${currentPhishingScore} pts
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 30px;">
                        You've sharpened your phishing detection skills! Score: ${currentPhishingScore} / ${gameData.phishingScenarios.length * 30}
                    </p>
                    <button class="btn-primary" onclick="navigateTo('dashboard')">Back to Dashboard</button>
                </div>
            `;
        }

        // ==================== PASSWORD STRENGTH CHECKER ====================
        function checkPasswordStrength() {
            const password = document.getElementById('passwordInput').value;
            const strengthFill = document.getElementById('strengthFill');
            const strengthLabel = document.getElementById('strengthLabel');
            const feedbackDiv = document.getElementById('passwordFeedback');

            if (!password) {
                strengthFill.className = 'strength-fill';
                strengthLabel.textContent = 'Enter a password to see its strength';
                strengthLabel.style.color = 'var(--text-dim)';
                feedbackDiv.innerHTML = '';
                return;
            }

            let strength = 0;
            const feedback = [];

            // Length check
            if (password.length >= 16) {
                strength += 30;
                feedback.push({ icon: '‚úì', text: 'Good length (16+ characters)', color: 'var(--green)' });
            } else if (password.length >= 12) {
                strength += 20;
                feedback.push({ icon: '‚ö†Ô∏è', text: 'Moderate length (12-15 characters)', color: 'var(--yellow)' });
            } else {
                feedback.push({ icon: '‚úó', text: 'Too short (less than 12 characters)', color: 'var(--red)' });
            }

            // Character variety
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) {
                strength += 20;
                feedback.push({ icon: '‚úì', text: 'Contains uppercase and lowercase', color: 'var(--green)' });
            } else {
                feedback.push({ icon: '‚úó', text: 'Missing uppercase or lowercase', color: 'var(--red)' });
            }

            if (/[0-9]/.test(password)) {
                strength += 15;
                feedback.push({ icon: '‚úì', text: 'Contains numbers', color: 'var(--green)' });
            } else {
                feedback.push({ icon: '‚úó', text: 'No numbers found', color: 'var(--red)' });
            }

            if (/[^a-zA-Z0-9]/.test(password)) {
                strength += 15;
                feedback.push({ icon: '‚úì', text: 'Contains special characters', color: 'var(--green)' });
            } else {
                feedback.push({ icon: '‚úó', text: 'No special characters', color: 'var(--red)' });
            }

            // Common words check (simplified)
            const commonWords = ['password', 'admin', '123456', 'qwerty', 'letmein'];
            const hasCommon = commonWords.some(word => password.toLowerCase().includes(word));
            if (!hasCommon) {
                strength += 20;
                feedback.push({ icon: '‚úì', text: 'No common words detected', color: 'var(--green)' });
            } else {
                feedback.push({ icon: '‚úó', text: 'Contains common words', color: 'var(--red)' });
            }

            // Update strength meter
            if (strength < 40) {
                strengthFill.className = 'strength-fill strength-weak';
                strengthLabel.textContent = 'Weak Password';
                strengthLabel.style.color = 'var(--red)';
            } else if (strength < 70) {
                strengthFill.className = 'strength-fill strength-medium';
                strengthLabel.textContent = 'Medium Password';
                strengthLabel.style.color = 'var(--yellow)';
            } else {
                strengthFill.className = 'strength-fill strength-strong';
                strengthLabel.textContent = 'Strong Password!';
                strengthLabel.style.color = 'var(--green)';
            }

            // Render feedback
            feedbackDiv.innerHTML = `
                <h4 style="margin-bottom: 15px;">Password Analysis:</h4>
                ${feedback.map(f => `
                    <div class="feedback-item" style="color: ${f.color};">
                        <span>${f.icon}</span>
                        <span>${f.text}</span>
                    </div>
                `).join('')}
            `;
        }

        function completePasswordChallenge() {
            const password = document.getElementById('passwordInput').value;
            // Simplified logic: user gets points just for trying, but a real app would check if strength is 'Strong'
            if (!password) {
                alert('Please enter a password first!');
                return;
            }

            userProgress.passwordPoints += 50;
            userProgress.challengesWon++;
            updateAllScores();

            showToast('Challenge Complete!', 'You earned +50 points!', 'üîê');
            setTimeout(() => navigateTo('dashboard'), 2000);
        }

        // ==================== ACHIEVEMENTS ====================
        function renderAchievements() {
            const achievementsGrid = document.getElementById('achievementsGrid');
            
            achievementsGrid.innerHTML = gameData.achievements.map(achievement => {
                const unlocked = userProgress.unlockedAchievements.includes(achievement.name);
                let progress = 0;
                let totalReq = achievement.requirement;

                // Calculate progress
                if (!unlocked) {
                    if (achievement.type === 'lessons') progress = userProgress.lessonsCompleted.length;
                    else if (achievement.type === 'phishing') progress = userProgress.phishingCorrect;
                    else if (achievement.type === 'points') progress = userProgress.totalScore;
                    else if (achievement.type === 'streak') progress = userProgress.currentStreak;
                    else if (achievement.type === 'password-module') progress = userProgress.lessonsCompleted.filter(l => l.startsWith('password-security')).length;
                    else if (achievement.type === 'neural-module') progress = userProgress.lessonsCompleted.filter(l => l.startsWith('neural-hijacking')).length;
                }

                return `
                    <div class="achievement-card ${unlocked ? 'unlocked' : 'locked'}">
                        <div class="achievement-icon">${achievement.icon}</div>
                        <div class="achievement-name">${achievement.name}</div>
                        <div class="achievement-desc">${achievement.description}</div>
                        <div class="achievement-points">+${achievement.points} pts</div>
                        ${!unlocked ? `
                            <div class="achievement-progress">
                                <div class="progress-bar" style="margin-top: 10px;">
                                    <div class="progress-fill" style="width: ${Math.min((progress / totalReq) * 100, 100)}%;"></div>
                                </div>
                                <div style="margin-top: 5px;">${progress} / ${totalReq}</div>
                            </div>
                        ` : '<div style="margin-top: 10px; color: var(--green); font-weight: 600;">‚úì Unlocked</div>'}
                    </div>
                `;
            }).join('');

            document.getElementById('totalAchievementPoints').textContent = userProgress.achievementPoints + ' pts';
        }

        function unlockAchievement(name) {
            if (userProgress.unlockedAchievements.includes(name)) return;

            const achievement = gameData.achievements.find(a => a.name === name);
            if (!achievement) return;

            userProgress.unlockedAchievements.push(name);
            userProgress.achievementPoints += achievement.points;
            updateAllScores();

            showToast('Achievement Unlocked!', `${achievement.name} (+${achievement.points} pts)`, achievement.icon);
        }

        // ==================== LEADERBOARD ====================
        function renderLeaderboard() {
            const leaderboardList = document.getElementById('leaderboardList');
            const currentUserScore = userProgress.totalScore;
            const currentUserBadges = userProgress.unlockedAchievements.length;

            // Add current user to leaderboard
            const fullLeaderboard = [...gameData.leaderboard];
            
            // Remove 'You' if already in the list to update score/rank
            const existingUserIndex = fullLeaderboard.findIndex(u => u.username === 'You');
            if (existingUserIndex !== -1) {
                fullLeaderboard.splice(existingUserIndex, 1);
            }

            // Insert new user data based on score
            const newUserEntry = {
                username: 'You',
                score: currentUserScore,
                badges: currentUserBadges,
                isCurrentUser: true
            };
            
            let inserted = false;
            for (let i = 0; i < fullLeaderboard.length; i++) {
                if (currentUserScore >= fullLeaderboard[i].score) {
                    fullLeaderboard.splice(i, 0, newUserEntry);
                    inserted = true;
                    break;
                }
            }
            if (!inserted && currentUserScore > 0) {
                fullLeaderboard.push(newUserEntry);
            }

            // Update ranks and limit to top 10
            fullLeaderboard.forEach((user, index) => {
                user.rank = index + 1;
            });

            leaderboardList.innerHTML = fullLeaderboard.slice(0, 10).map(user => `
                <div class="leaderboard-item ${user.isCurrentUser ? 'current-user' : ''}">
                    <div class="rank-number ${user.rank <= 3 ? 'top3' : ''}">
                        ${user.rank <= 3 && user.isCurrentUser ? ['ü•á', 'ü•à', 'ü•â'][user.rank - 1] : user.rank <= 3 ? ['ü•á', 'ü•à', 'ü•â'][user.rank - 1] : '#' + user.rank}
                    </div>
                    <div class="user-info">
                        <div class="username">${user.username}</div>
                        <div class="user-stats">${user.badges} badges earned</div>
                    </div>
                    <div class="user-score">${user.score}</div>
                </div>
            `).join('');
        }

        function switchLeaderboard(period) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            // In a real app, this would fetch different data
            renderLeaderboard(); // Re-render with existing data for visual feedback
        }

        // ==================== SCORE MANAGEMENT ====================
        function updateAllScores() {
            userProgress.totalScore = userProgress.passwordPoints + userProgress.phishingPoints + userProgress.achievementPoints;

            // Update header
            document.getElementById('headerScoreValue').textContent = userProgress.totalScore;

            // Update dashboard
            document.getElementById('totalScore').textContent = userProgress.totalScore;
            document.getElementById('passwordPoints').textContent = userProgress.passwordPoints + ' pts';
            document.getElementById('phishingPoints').textContent = userProgress.phishingPoints + ' pts';
            document.getElementById('achievementPoints').textContent = userProgress.achievementPoints + ' pts';
            
            document.getElementById('modulesCompleted').textContent = userProgress.modulesCompleted;
            document.getElementById('challengesWon').textContent = userProgress.challengesWon;
            document.getElementById('currentStreak').textContent = userProgress.currentStreak;

            // Update level
            updateUserLevel();

            // Check for points achievement
            if (userProgress.totalScore >= 1000) {
                unlockAchievement('Security Champion');
            }

            // Re-render dashboard elements that rely on updated scores/progress
            if (document.getElementById('dashboard').classList.contains('active')) {
                renderRecommendedModule();
                renderAllModules();
                renderChallenges();
            }

            // Re-render other views if they are active
            if (document.getElementById('achievements').classList.contains('active')) renderAchievements();
            if (document.getElementById('leaderboard').classList.contains('active')) renderLeaderboard();
        }

        function updateUserLevel() {
            const score = userProgress.totalScore;
            let level = 'Novice';
            let progress = 0;
            let description = 'Complete more challenges to rank up!';

            if (score < 500) {
                level = 'Novice';
                progress = (score / 500) * 100;
                description = `${500 - score} points to Expert`;
            } else if (score < 1500) {
                level = 'Expert';
                progress = ((score - 500) / 1000) * 100;
                description = `${1500 - score} points to Master Defender`;
            } else {
                level = 'Master Defender';
                progress = 100;
                description = 'Maximum level reached! üèÜ';
            }

            document.getElementById('userLevel').textContent = level;
            document.getElementById('levelProgress').style.width = progress + '%';
            document.getElementById('levelDescription').textContent = description;
        }

        // ==================== TOAST NOTIFICATIONS ====================
        function showToast(title, message, icon = 'üèÜ') {
            const toast = document.getElementById('toast');
            document.getElementById('toastIcon').textContent = icon;
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;

            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ==================== BREACH THEORY MODAL ====================
        function showBreachModal(force = false) {
            const modal = document.getElementById('breachModal');
            const modalContent = document.getElementById('breachModalContent');
            const module = gameData.modules.find(m => m.id === 'id-password-breaches');
            if (!module) return;

            modalContent.innerHTML = `
                <h2>${module.icon} ${module.name}</h2>
                <p>${module.story}</p>
                <div style="margin-top:18px; display:flex; gap:12px; justify-content:flex-end;">
                    <button class="btn-secondary" onclick="closeBreachModal()">Close</button>
                    <button class="btn-primary" onclick="openModule('id-password-breaches'); closeBreachModal()">Learn More</button>
                </div>
            `;

            // Show only if forced or not seen before
            const seen = localStorage.getItem('seenBreachModal');
            if (force || !seen) {
                modal.classList.add('show-modal');
                localStorage.setItem('seenBreachModal', '1');
            }
        }

        function closeBreachModal() {
            const modal = document.getElementById('breachModal');
            modal.classList.remove('show-modal');
        }

        // ==================== THREAT MODAL ====================
        function showThreatModal(threat) {
            const modal = document.getElementById('threatModal');
            const content = document.getElementById('threatModalContent');

            content.innerHTML = `
                <h2>${threat.icon} ${threat.name}</h2>
                <p>${threat.description}</p>
                <div style="margin-top:12px; color: var(--text-secondary);">More details and mitigation steps:</div>
                <ul style="margin-top:10px; color: var(--text-secondary);">
                    <li>Understand common vectors: data leaks, social engineering, credential reuse.</li>
                    <li>Use unique passwords and a password manager.</li>
                    <li>Enable multi-factor authentication (MFA) wherever possible.</li>
                    <li>Monitor accounts for suspicious activity and change passwords after breaches.</li>
                </ul>
                <div style="margin-top:18px; display:flex; gap:12px; justify-content:flex-end;">
                    <button class="btn-secondary" onclick="closeThreatModal()">Close</button>
                    <button class="btn-primary" onclick="navigateTo('dashboard'); closeThreatModal()">Go to Dashboard</button>
                </div>
            `;

            modal.classList.add('show-modal');
        }

        function closeThreatModal() {
            const modal = document.getElementById('threatModal');
            modal.classList.remove('show-modal');
        }

        // ==================== START APP ====================
        window.addEventListener('DOMContentLoaded', () => {
            init();
            // Auto-show breach theory modal on first load (or force by changing argument)
            showBreachModal(false);
        });
    </script>
</body>
</html>